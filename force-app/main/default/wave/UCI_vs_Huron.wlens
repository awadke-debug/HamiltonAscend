{"filters":[],"gridLayouts":[],"layouts":[],"steps":{"saql":{"broadcastFacet":false,"groups":[],"numbers":[],"query":"q1 = load \"Gift_Credit_and_Payment\";\nq2 = load \"Giving_Insights_Gifts\";\nq2_E = filter q2 by 'cash_flag' == 1;\nq2_F = filter q2 by 'fundraising_flag' == 1;\nq2 = cogroup q2_E by 'ucinn_ascendv2__Contact__c' full, q2_F by 'ucinn_ascendv2__Contact__c';\nq2 = foreach q2 generate coalesce(q2_E.'ucinn_ascendv2__Contact__c', q2_F.'ucinn_ascendv2__Contact__c') as 'ucinn_ascendv2__Contact__c', sum(q2_E.'ucinn_ascendv2__Credit_Amount__c') as 'E', sum(q2_F.'ucinn_ascendv2__Credit_Amount__c') as 'F';\nq = cogroup q1 by 'ucinn_ascendv2__Contact__c' full, q2 by 'ucinn_ascendv2__Contact__c';\nq = foreach q generate coalesce(q1.'ucinn_ascendv2__Contact__c', q2.'ucinn_ascendv2__Contact__c') as 'ucinn_ascendv2__Contact__c', sum(q1.'Fundraising_Amount') as 'B', sum(q1.'Cash_Amount') as 'C', avg(q1.'Contact.ucinn_ascendv2__Lifetime_Fundraising__c') as 'A', avg(q1.'Contact.ucinn_ascendv2__Lifetime_Cash__c') as 'D', first(q2.'E') as 'E', first(q2.'F') as 'F';\nq = foreach q generate 'ucinn_ascendv2__Contact__c', 'B', 'C', 'A', 'D', 'E', 'F', case when \ncoalesce(D,0) != coalesce(C,0) \nor coalesce(D,0) != coalesce(E,0) \nor coalesce(A,0) != coalesce(B,0) \nor coalesce(A,0) != coalesce(F,0) \nthen 1 else 0 end as 'G';\nq = filter q by G==1 and 'ucinn_ascendv2__Contact__c' is not null;\nq = foreach q generate 'ucinn_ascendv2__Contact__c', 'B' as 'GCP Fundraising','F' as 'UCI Fundraising', 'A' as 'Lifetime Fundraising', 'C' as 'GCP Cash', 'E' as 'UCI Cash', 'D' as 'Lifetime Cash', 'G' as 'Check';\nq = order q by 'ucinn_ascendv2__Contact__c' asc;\nq = limit q 2000;","receiveFacetSource":{"mode":"none","steps":[]},"selectMode":"none","strings":[],"type":"saql","useGlobal":true}},"widgets":{"saql_table":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":true},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12,"textWrap":true},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"step":"saql","totals":true,"verticalPadding":8},"type":"table"}}}