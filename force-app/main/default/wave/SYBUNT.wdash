{"dataSourceLinksInfo":{"enableAutomaticLinking":true,"excludeRelationships":[],"links":[]},"filters":[{"dataset":{"name":"Giving_Insights_Gifts"},"dependent":true,"fields":["ucinn_ascendv2__Credit_Date_Formula__c"],"locked":false,"operator":">=<=","value":"[]"}],"gridLayouts":[{"name":"Default","numColumns":48,"pages":[{"label":"Untitled","name":"d44b0566-dd6b-4c8d-b828-ff886fe368c2","navigationHidden":false,"widgets":[{"colspan":13,"column":0,"name":"number_4","row":21,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":48,"column":0,"name":"container_1","row":16,"rowspan":91,"widgetStyle":{"backgroundColor":"#335779","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":35,"column":13,"name":"text_1","row":21,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":24,"column":0,"name":"text_3","row":71,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":24,"column":0,"name":"table_1","row":74,"rowspan":32,"widgetStyle":{"borderEdges":[]}},{"colspan":24,"column":24,"name":"table_3","row":74,"rowspan":32,"widgetStyle":{"borderEdges":[]}},{"colspan":35,"column":13,"name":"table_2","row":24,"rowspan":46,"widgetStyle":{"borderEdges":[]}},{"colspan":15,"column":0,"name":"pillbox_1","row":17,"rowspan":3,"widgetStyle":{"borderEdges":[]}},{"colspan":48,"column":0,"name":"component_1","row":0,"rowspan":16,"widgetStyle":{"borderEdges":[]}},{"colspan":13,"column":0,"name":"chart_1","row":24,"rowspan":46,"widgetStyle":{"borderEdges":[]}},{"colspan":24,"column":24,"name":"text_4","row":71,"rowspan":3,"widgetStyle":{"borderEdges":[]}}]}],"rowHeight":"fine","selectors":[],"style":{"alignmentX":"left","alignmentY":"top","backgroundColor":"#F2F6FA","cellSpacingX":8,"cellSpacingY":0,"fit":"original","gutterColor":"#C5D3E0"},"version":1.0}],"layouts":[],"steps":{"sybunt_orgs_1":{"broadcastFacet":true,"datasets":[{"name":"Giving_Insights_Gifts"}],"isGlobal":false,"label":"Table - sybunt orgs","query":{"aggregateFilters":[["pfy4_1",[0],">"],["cfy",[],"isnull"]],"columnGroups":[],"columnTotals":[],"limit":25000,"orders":[{"name":"Account.Name","filters":[],"ascending":true}],"rowTotals":[],"sourceFilters":{"Giving_Insights_Gifts":{"filters":[["{{cell(static_1.selection, 0, \"Text2\").asString()}}",[1],"=="]]}},"sources":[{"columns":[{"field":["sum","ucinn_ascendv2__Credit_Amount__c"],"name":"pfy4_1"}],"filters":[["ucinn_ascendv2__Credit_Date_Formula__c",[["fiscal_year",-4],["fiscal_year",-1]],"between"]],"groups":["Account.Id","Account.Name"],"joins":[],"name":"Giving_Insights_Gifts"},{"columns":[{"field":["sum","ucinn_ascendv2__Credit_Amount__c"],"name":"pfy4"}],"filters":[["ucinn_ascendv2__Credit_Date_Formula__c",[["fiscal_year",-4],["fiscal_year",-4]],"between"]],"groups":["Account.Id","Account.Name"],"joins":[],"name":"Giving_Insights_Gifts"},{"columns":[{"field":["sum","ucinn_ascendv2__Credit_Amount__c"],"name":"pfy3"}],"filters":[["ucinn_ascendv2__Credit_Date_Formula__c",[["fiscal_year",-3],["fiscal_year",-3]],"between"]],"groups":["Account.Id","Account.Name"],"joins":[],"name":"Giving_Insights_Gifts"},{"columns":[{"field":["sum","ucinn_ascendv2__Credit_Amount__c"],"name":"pfy2"}],"filters":[["ucinn_ascendv2__Credit_Date_Formula__c",[["fiscal_year",-2],["fiscal_year",-2]],"between"]],"groups":["Account.Id","Account.Name"],"joins":[],"name":"Giving_Insights_Gifts"},{"columns":[{"field":["sum","ucinn_ascendv2__Credit_Amount__c"],"name":"pfy1"}],"filters":[["ucinn_ascendv2__Credit_Date_Formula__c",[["fiscal_year",-1],["fiscal_year",-1]],"between"]],"groups":["Account.Id","Account.Name"],"joins":[],"name":"Giving_Insights_Gifts"},{"columns":[{"field":["sum","ucinn_ascendv2__Credit_Amount__c"],"name":"cfy"}],"filters":[["ucinn_ascendv2__Credit_Date_Formula__c",[["fiscal_year",0],["fiscal_year",0]],"between"]],"groups":["Account.Id","Account.Name"],"joins":[],"name":"Giving_Insights_Gifts"},{"columns":[{"formula":"coalesce(pfy4,0)","name":"A"},{"formula":"coalesce(pfy3,0)","name":"B"},{"formula":"coalesce(pfy2,0)","name":"C"},{"formula":"coalesce(pfy1,0)","name":"D"},{"formula":"coalesce(cfy,0)","name":"E"}],"filters":[],"groups":[],"joins":[]}]},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","type":"aggregateflex","useExternalFilters":true,"useGlobal":true,"visualizationParameters":{"options":{},"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":true},"columnProperties":{"Account.Name":{"parameters":{"alignment":"left","styles":{"linkColor":"#006dcc"}},"type":"text"}},"columns":["A","B","C","D","E","Account.Id","Account.Name"],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12,"textWrap":true},"headerProperties":{},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"static_1":{"broadcastFacet":true,"columns":{"Text2":{"type":"string"},"Display":{"type":"string"}},"label":"Toggle - Cash or Fundraising","selectMode":"singlerequired","start":"{\"Display\":[\"Fundraising\"]}","type":"staticflex","values":["{\"Display\":\"Fundraising\",\"Text2\":\"fundraising_flag\"}","{\"Display\":\"Cash\",\"Text2\":\"cash_flag\"}"]},"sybunt_orgs_count_1":{"broadcastFacet":true,"groups":[],"label":"sybunt orgs count","numbers":[],"query":"q = load \"Giving_Insights_Gifts\";\n\nq = filter q by {{cell(static_1.selection, 0, \"Text2\").asString()}}==1;\n\n-- get gifts for current and 1 to 4 fiscal years ago\nq_cfy = filter q by date('ucinn_ascendv2__Credit_Date_Formula__c_Year', 'ucinn_ascendv2__Credit_Date_Formula__c_Month', 'ucinn_ascendv2__Credit_Date_Formula__c_Day') in [\"current fiscal_year\"..\"current fiscal_year\"];\nq_pfy1 = filter q by date('ucinn_ascendv2__Credit_Date_Formula__c_Year', 'ucinn_ascendv2__Credit_Date_Formula__c_Month', 'ucinn_ascendv2__Credit_Date_Formula__c_Day') in [\"1 fiscal_year ago\"..\"1 fiscal_year ago\"];\nq_pfy2 = filter q by date('ucinn_ascendv2__Credit_Date_Formula__c_Year', 'ucinn_ascendv2__Credit_Date_Formula__c_Month', 'ucinn_ascendv2__Credit_Date_Formula__c_Day') in [\"2 fiscal_years ago\"..\"2 fiscal_years ago\"];\nq_pfy3 = filter q by date('ucinn_ascendv2__Credit_Date_Formula__c_Year', 'ucinn_ascendv2__Credit_Date_Formula__c_Month', 'ucinn_ascendv2__Credit_Date_Formula__c_Day') in [\"3 fiscal_years ago\"..\"3 fiscal_years ago\"];\nq_pfy4 = filter q by date('ucinn_ascendv2__Credit_Date_Formula__c_Year', 'ucinn_ascendv2__Credit_Date_Formula__c_Month', 'ucinn_ascendv2__Credit_Date_Formula__c_Day') in [\"4 fiscal_years ago\"..\"4 fiscal_years ago\"];\n\n-- join queries by account id\nq = cogroup q_cfy by 'Account.Id' full, q_pfy1 by 'Account.Id' full, q_pfy2 by 'Account.Id' full, q_pfy3 by 'Account.Id' full, q_pfy4 by 'Account.Id';\n\n-- sum gifts\nq = foreach q generate coalesce(q_cfy.'Account.Id', q_pfy1.'Account.Id', q_pfy2.'Account.Id', q_pfy3.'Account.Id', q_pfy4.'Account.Id') as 'Account.Id', sum(q_cfy.'ucinn_ascendv2__Credit_Amount__c') as 'cfy', sum(q_pfy1.'ucinn_ascendv2__Credit_Amount__c') as 'pfy1', sum(q_pfy2.'ucinn_ascendv2__Credit_Amount__c') as 'pfy2', sum(q_pfy3.'ucinn_ascendv2__Credit_Amount__c') as 'pfy3', sum(q_pfy4.'ucinn_ascendv2__Credit_Amount__c') as 'pfy4';\n\n-- show sybunt orgs (gifted from 4 to 1 year ago, but not current year)\nq = filter q by coalesce('cfy', 0) == 0 && ('pfy1' > 0 || 'pfy2' > 0 || 'pfy3' > 0 || 'pfy4' > 0);\n\n-- count results\nq = group q by all;\nq = foreach q generate count() as 'SYBUNT Organization Count';\nq = limit q 2000;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useExternalFilters":true,"useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":true},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12,"textWrap":true},"headerProperties":{},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"totals":true,"verticalPadding":8},"type":"table"}},"sybunt_cons_count_1":{"broadcastFacet":true,"groups":[],"label":"sybunt cons count","numbers":[],"query":"q = load \"Giving_Insights_Gifts\";\n\nq = filter q by {{cell(static_1.selection, 0, \"Text2\").asString()}} == 1;\n\n-- get gifts for current and 1 to 4 fiscal years ago\nq_cfy = filter q by date('ucinn_ascendv2__Credit_Date_Formula__c_Year', 'ucinn_ascendv2__Credit_Date_Formula__c_Month', 'ucinn_ascendv2__Credit_Date_Formula__c_Day') in [\"current fiscal_year\"..\"current fiscal_year\"];\nq_pfy1 = filter q by date('ucinn_ascendv2__Credit_Date_Formula__c_Year', 'ucinn_ascendv2__Credit_Date_Formula__c_Month', 'ucinn_ascendv2__Credit_Date_Formula__c_Day') in [\"1 fiscal_year ago\"..\"1 fiscal_year ago\"];\nq_pfy2 = filter q by date('ucinn_ascendv2__Credit_Date_Formula__c_Year', 'ucinn_ascendv2__Credit_Date_Formula__c_Month', 'ucinn_ascendv2__Credit_Date_Formula__c_Day') in [\"2 fiscal_years ago\"..\"2 fiscal_years ago\"];\nq_pfy3 = filter q by date('ucinn_ascendv2__Credit_Date_Formula__c_Year', 'ucinn_ascendv2__Credit_Date_Formula__c_Month', 'ucinn_ascendv2__Credit_Date_Formula__c_Day') in [\"3 fiscal_years ago\"..\"3 fiscal_years ago\"];\nq_pfy4 = filter q by date('ucinn_ascendv2__Credit_Date_Formula__c_Year', 'ucinn_ascendv2__Credit_Date_Formula__c_Month', 'ucinn_ascendv2__Credit_Date_Formula__c_Day') in [\"4 fiscal_years ago\"..\"4 fiscal_years ago\"];\n\n-- join queries by contact id\nq = cogroup q_cfy by 'Contact.Id' full, q_pfy1 by 'Contact.Id' full, q_pfy2 by 'Contact.Id' full, q_pfy3 by 'Contact.Id' full, q_pfy4 by 'Contact.Id';\n\n-- sum gifts\nq = foreach q generate coalesce(q_cfy.'Contact.Id', q_pfy1.'Contact.Id', q_pfy2.'Contact.Id', q_pfy3.'Contact.Id', q_pfy4.'Contact.Id') as 'Contact.Id', sum(q_cfy.'ucinn_ascendv2__Credit_Amount__c') as 'cfy', sum(q_pfy1.'ucinn_ascendv2__Credit_Amount__c') as 'pfy1', sum(q_pfy2.'ucinn_ascendv2__Credit_Amount__c') as 'pfy2', sum(q_pfy3.'ucinn_ascendv2__Credit_Amount__c') as 'pfy3', sum(q_pfy4.'ucinn_ascendv2__Credit_Amount__c') as 'pfy4';\n\n-- show sybunt constituents (gifted from 4 to 1 year ago, but not current year)\nq = filter q by coalesce('cfy', 0) == 0 && ('pfy1' > 0 || 'pfy2' > 0 || 'pfy3' > 0 || 'pfy4' > 0);\n\n-- count results\nq = group q by all;\nq = foreach q generate count() as 'SYBUNT Constituent Count';\nq = limit q 2000;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useExternalFilters":true,"useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":true,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"hbar","title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"columnMap":{"trellis":[],"dimensionAxis":[],"plots":["SYBUNT Constituent Count"]},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"theme":"wave","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"sybunt_cons_1":{"broadcastFacet":true,"datasets":[{"name":"Giving_Insights_Gifts"}],"isGlobal":false,"label":"Table - sybunt cons","query":{"aggregateFilters":[["E",[],"isnull"],["F",[0],">"]],"columnGroups":[],"columnTotals":[],"limit":25000,"orders":[{"name":"J","filters":[],"ascending":false}],"rowTotals":[],"sourceFilters":{"Giving_Insights_Gifts":{"filters":[["{{cell(static_1.selection, 0, \"Text2\").asString()}}",[1],"=="]]}},"sources":[{"columns":[{"field":["count","*"],"name":"L"}],"filters":[],"groups":["Contact.Id","Contact.ucinn_ascendv2__Donor_ID__c","Contact.Name"],"joins":[],"name":"Giving_Insights_Gifts"},{"columns":[{"field":["sum","ucinn_ascendv2__Credit_Amount__c"],"name":"A"}],"filters":[["ucinn_ascendv2__Credit_Date_Formula__c",[["fiscal_year",-4],["fiscal_year",-4]],"between"]],"groups":["Contact.Id","Contact.ucinn_ascendv2__Donor_ID__c","Contact.Name"],"joins":[],"name":"Giving_Insights_Gifts"},{"columns":[{"field":["sum","ucinn_ascendv2__Credit_Amount__c"],"name":"B"}],"filters":[["ucinn_ascendv2__Credit_Date_Formula__c",[["fiscal_year",-3],["fiscal_year",-3]],"between"]],"groups":["Contact.Id","Contact.ucinn_ascendv2__Donor_ID__c","Contact.Name"],"joins":[],"name":"Giving_Insights_Gifts"},{"columns":[{"field":["sum","ucinn_ascendv2__Credit_Amount__c"],"name":"D"}],"filters":[["ucinn_ascendv2__Credit_Date_Formula__c",[["fiscal_year",-2],["fiscal_year",-2]],"between"]],"groups":["Contact.Id","Contact.ucinn_ascendv2__Donor_ID__c","Contact.Name"],"joins":[],"name":"Giving_Insights_Gifts"},{"columns":[{"field":["sum","ucinn_ascendv2__Credit_Amount__c"],"name":"C"}],"filters":[["ucinn_ascendv2__Credit_Date_Formula__c",[["fiscal_year",-1],["fiscal_year",-1]],"between"]],"groups":["Contact.Id","Contact.ucinn_ascendv2__Donor_ID__c","Contact.Name"],"joins":[],"name":"Giving_Insights_Gifts"},{"columns":[{"field":["sum","ucinn_ascendv2__Credit_Amount__c"],"name":"F"}],"filters":[["ucinn_ascendv2__Credit_Date_Formula__c",[["fiscal_year",-4],["fiscal_year",-1]],"between"]],"groups":["Contact.Id","Contact.ucinn_ascendv2__Donor_ID__c","Contact.Name"],"joins":[],"name":"Giving_Insights_Gifts"},{"columns":[{"field":["sum","ucinn_ascendv2__Credit_Amount__c"],"name":"E"}],"filters":[["ucinn_ascendv2__Credit_Date_Formula__c",[["fiscal_year",0],["fiscal_year",0]],"between"]],"groups":["Contact.Id","Contact.ucinn_ascendv2__Donor_ID__c","Contact.Name"],"joins":[],"name":"Giving_Insights_Gifts"},{"columns":[{"formula":"coalesce(A,0)","name":"G"},{"formula":"coalesce(B,0)","name":"H"},{"formula":"coalesce(D,0)","name":"I"},{"formula":"coalesce(C,0)","name":"J"},{"formula":"coalesce(E,0)","name":"K"}],"filters":[],"groups":[],"joins":[]}]},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","type":"aggregateflex","useExternalFilters":true,"useGlobal":true,"visualizationParameters":{"options":{},"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":true},"columnProperties":{"Contact.Name":{"parameters":{"alignment":"left","styles":{"linkColor":"#006dcc"}},"type":"text"}},"columns":["G","H","I","J","K","Contact.ucinn_ascendv2__Donor_ID__c","Contact.Name"],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12,"textWrap":true},"headerProperties":{},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"des_fund_details_2":{"broadcastFacet":true,"datasets":[{"name":"Giving_Insights_Gifts"}],"isGlobal":false,"label":"Table - Des fund details","query":{"aggregateFilters":[],"columnGroups":[],"columnTotals":["Contact.HAM_Reunion_Year__c_bucket"],"limit":2000,"orders":[{"name":"Contact.HAM_Reunion_Year__c_bucket","filters":[],"ascending":true}],"rowTotals":[],"sourceFilters":{"Giving_Insights_Gifts":{"filters":[["{{cell(static_1.selection, 0, \"Text2\").asString()}}",[1],"=="]]}},"sources":[{"columns":[{"field":["sum","ucinn_ascendv2__Credit_Amount__c"],"name":"A"}],"filters":[],"groups":["Contact.HAM_Reunion_Year__c_bucket"],"joins":[],"name":"Giving_Insights_Gifts"},{"columns":[{"field":["sum","ucinn_ascendv2__Credit_Amount__c"],"name":"pfy4"}],"filters":[["ucinn_ascendv2__Credit_Date_Formula__c",[["fiscal_year",-4],["fiscal_year",-4]],"between"]],"groups":["Contact.HAM_Reunion_Year__c_bucket"],"joins":[],"name":"Giving_Insights_Gifts"},{"columns":[{"field":["sum","ucinn_ascendv2__Credit_Amount__c"],"name":"pfy3"}],"filters":[["ucinn_ascendv2__Credit_Date_Formula__c",[["fiscal_year",-3],["fiscal_year",-3]],"between"]],"groups":["Contact.HAM_Reunion_Year__c_bucket"],"joins":[],"name":"Giving_Insights_Gifts"},{"columns":[{"field":["sum","ucinn_ascendv2__Credit_Amount__c"],"name":"pfy2"}],"filters":[["ucinn_ascendv2__Credit_Date_Formula__c",[["fiscal_year",-2],["fiscal_year",-2]],"between"]],"groups":["Contact.HAM_Reunion_Year__c_bucket"],"joins":[],"name":"Giving_Insights_Gifts"},{"columns":[{"field":["sum","ucinn_ascendv2__Credit_Amount__c"],"name":"pfy1"}],"filters":[["ucinn_ascendv2__Credit_Date_Formula__c",[["fiscal_year",-1],["fiscal_year",-1]],"between"]],"groups":["Contact.HAM_Reunion_Year__c_bucket"],"joins":[],"name":"Giving_Insights_Gifts"},{"columns":[{"field":["sum","ucinn_ascendv2__Credit_Amount__c"],"name":"cfy"}],"filters":[["ucinn_ascendv2__Credit_Date_Formula__c",[["fiscal_year",0],["fiscal_year",0]],"between"]],"groups":["Contact.HAM_Reunion_Year__c_bucket"],"joins":[],"name":"Giving_Insights_Gifts"},{"columns":[{"formula":"cfy - pfy1","name":"diff"}],"filters":[],"groups":[],"joins":[]}]},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","type":"aggregateflex","useExternalFilters":true,"useGlobal":true,"visualizationParameters":{"options":{},"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":true},"columnProperties":{},"columns":["Contact.HAM_Reunion_Year__c_bucket","pfy4","pfy3","pfy2","pfy1","cfy","diff"],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12,"textWrap":true},"headerProperties":{},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"totals":true,"verticalPadding":8},"type":"table"}},"lens_1":{"broadcastFacet":true,"groups":[],"label":"Bars - Decade count","numbers":[],"query":"q = load \"Giving_Insights_Gifts\";\n\nq = filter q by {{cell(static_1.selection, 0, \"Text2\").asString()}} == 1;\n\n-- get gifts for current and 1 to 4 fiscal years ago\nq_cfy = filter q by date('ucinn_ascendv2__Credit_Date_Formula__c_Year', 'ucinn_ascendv2__Credit_Date_Formula__c_Month', 'ucinn_ascendv2__Credit_Date_Formula__c_Day') in [\"current fiscal_year\"..\"current fiscal_year\"];\nq_pfy1 = filter q by date('ucinn_ascendv2__Credit_Date_Formula__c_Year', 'ucinn_ascendv2__Credit_Date_Formula__c_Month', 'ucinn_ascendv2__Credit_Date_Formula__c_Day') in [\"1 fiscal_year ago\"..\"1 fiscal_year ago\"];\nq_pfy2 = filter q by date('ucinn_ascendv2__Credit_Date_Formula__c_Year', 'ucinn_ascendv2__Credit_Date_Formula__c_Month', 'ucinn_ascendv2__Credit_Date_Formula__c_Day') in [\"2 fiscal_years ago\"..\"2 fiscal_years ago\"];\nq_pfy3 = filter q by date('ucinn_ascendv2__Credit_Date_Formula__c_Year', 'ucinn_ascendv2__Credit_Date_Formula__c_Month', 'ucinn_ascendv2__Credit_Date_Formula__c_Day') in [\"3 fiscal_years ago\"..\"3 fiscal_years ago\"];\nq_pfy4 = filter q by date('ucinn_ascendv2__Credit_Date_Formula__c_Year', 'ucinn_ascendv2__Credit_Date_Formula__c_Month', 'ucinn_ascendv2__Credit_Date_Formula__c_Day') in [\"4 fiscal_years ago\"..\"4 fiscal_years ago\"];\n\n-- join queries by contact id\nq = cogroup \nq_cfy by ('Contact.Id', 'Contact.HAM_Reunion_Year__c_bucket') full, \nq_pfy1 by ('Contact.Id', 'Contact.HAM_Reunion_Year__c_bucket') full, \nq_pfy2 by ('Contact.Id', 'Contact.HAM_Reunion_Year__c_bucket') full,\nq_pfy3 by ('Contact.Id', 'Contact.HAM_Reunion_Year__c_bucket') full, \nq_pfy4 by ('Contact.Id', 'Contact.HAM_Reunion_Year__c_bucket');\n\n-- sum gifts\nq = foreach q generate \ncoalesce(q_cfy.'Contact.Id', q_pfy1.'Contact.Id', q_pfy2.'Contact.Id', q_pfy3.'Contact.Id', q_pfy4.'Contact.Id') as 'Contact.Id', \nsum(q_cfy.'ucinn_ascendv2__Credit_Amount__c') as 'cfy', \nsum(q_pfy1.'ucinn_ascendv2__Credit_Amount__c') as 'pfy1', \nsum(q_pfy2.'ucinn_ascendv2__Credit_Amount__c') as 'pfy2', \nsum(q_pfy3.'ucinn_ascendv2__Credit_Amount__c') as 'pfy3', \nsum(q_pfy4.'ucinn_ascendv2__Credit_Amount__c') as 'pfy4',\ncoalesce(q_cfy.'Contact.HAM_Reunion_Year__c_bucket', q_pfy1.'Contact.HAM_Reunion_Year__c_bucket', q_pfy2.'Contact.HAM_Reunion_Year__c_bucket', q_pfy3.'Contact.HAM_Reunion_Year__c_bucket', q_pfy4.'Contact.HAM_Reunion_Year__c_bucket') as 'Contact.HAM_Reunion_Year__c_bucket';\n\n-- show sybunt constituents (gifted from 4 to 1 year ago, but not current year)\nq = filter q by coalesce('cfy', 0) == 0 && ('pfy1' > 0 || 'pfy2' > 0 || 'pfy3' > 0 || 'pfy4' > 0);\n\n-- count results\nq = group q by 'Contact.HAM_Reunion_Year__c_bucket';\nq = foreach q generate 'Contact.HAM_Reunion_Year__c_bucket', count() as 'SYBUNT Constituent Count';\nq = limit q 2000;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","strings":[],"type":"saql","useExternalFilters":true,"useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":false,"show":false,"customSize":"auto","position":"right-top","inside":false},"axisMode":"sync","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"hbar","title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"columnMap":{"trellis":[],"dimensionAxis":["Contact.HAM_Reunion_Year__c_bucket"],"plots":["SYBUNT Constituent Count"]},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","measureAxis1":{"sqrtScale":true,"showTitle":false,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"theme":"wave","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":false,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}}},"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1},"widgets":{"table_1":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":true},"columnProperties":{"Contact.Name":{"parameters":{"alignment":"left","styles":{"linkColor":"#006dcc"}},"type":"text"}},"columns":["G","H","I","J","K","Contact.ucinn_ascendv2__Donor_ID__c","Contact.Name"],"customBulkActions":[],"exploreLink":true,"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12,"textWrap":true},"headerProperties":{},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"step":"sybunt_cons_1","totals":true,"verticalPadding":8},"type":"table"},"number_4":{"parameters":{"compact":false,"exploreLink":true,"interactions":[],"measureField":"SYBUNT Constituent Count","numberColor":"#020821","numberSize":16,"showActionMenu":true,"step":"sybunt_cons_count_1","textAlignment":"center","title":"SYBUNT Constituent Count:","titleColor":"#020821","titleSize":16,"tooltip":{"customizeTooltip":false}},"type":"number"},"table_2":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":true},"columnProperties":{},"columns":["Contact.HAM_Reunion_Year__c_bucket","pfy4","pfy3","pfy2","pfy1","cfy","diff"],"customBulkActions":[],"exploreLink":true,"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12,"textWrap":true},"headerProperties":{},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"step":"des_fund_details_2","totals":true,"verticalPadding":8},"type":"table"},"table_3":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12,"textWrap":true},"columnProperties":{"Account.Name":{"parameters":{"alignment":"left","styles":{"linkColor":"#006dcc"}},"type":"text"}},"columns":["A","B","C","D","E","Account.Id","Account.Name"],"customBulkActions":[],"exploreLink":true,"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12,"textWrap":true},"headerProperties":{},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"mode":"fittocontainer","numberOfLines":1,"pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"step":"sybunt_orgs_1","totals":true,"verticalPadding":8},"type":"table"},"container_1":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original","interactions":[]},"type":"container"},"component_1":{"parameters":{"pageName":"988b16a4-978f-459d-b6ab-2d1c962038fb","shareState":true,"source":{"name":"Filter_Bar_Master","type":"component"}},"type":"component"},"pillbox_1":{"parameters":{"compact":false,"exploreLink":false,"fontSize":14,"interactions":[],"selectedTab":{"backgroundColor":"#0070D2","borderColor":"#C6D3E1","borderEdges":["all"],"borderWidth":1,"textColor":"#FFFFFF"},"showActionMenu":true,"step":"static_1","textColor":"#0070D2"},"type":"pillbox"},"text_1":{"parameters":{"content":{"richTextContent":[{"attributes":{"color":"#091a3e","size":"16px"},"insert":"Fundraising versus Cash"},{"attributes":{"align":"left"},"insert":"\n"}]},"interactions":[],"showActionMenu":true},"type":"text"},"text_3":{"parameters":{"content":{"richTextContent":[{"attributes":{"color":"#091a3e","size":"16px"},"insert":"SYBUNT Constituents Count: "},{"attributes":{},"insert":"[SYBUNT_Constituent_C]"},{"attributes":{"align":"center"},"insert":"\n"}],"values":{"SYBUNT_Constituent_C":{"compact":false,"field":"SYBUNT Constituent Count","sourceType":"result","step":"sybunt_cons_count_1"}}},"interactions":[],"showActionMenu":true},"type":"text"},"text_4":{"parameters":{"content":{"richTextContent":[{"attributes":{"color":"#091a3e","size":"16px"},"insert":"SYBUNT Org Count: "},{"attributes":{},"insert":"[SYBUNT_Organization_]"},{"attributes":{"align":"center"},"insert":"\n"}],"values":{"SYBUNT_Organization_":{"compact":false,"field":"SYBUNT Organization Count","sourceType":"result","step":"sybunt_orgs_count_1"}}},"interactions":[],"showActionMenu":true},"type":"text"},"chart_1":{"parameters":{"autoFitMode":"keepLabels","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":false,"show":false,"customSize":"auto","position":"right-top","inside":false},"axisMode":"sync","tooltip":{"content":{"legend":{"showBinLabel":true,"measures":[],"showNullValues":true,"customizeLegend":false,"showPercentage":true,"showDimensions":true,"showMeasures":true,"dimensions":[]}}},"visualizationType":"hbar","exploreLink":true,"title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"columnMap":{"trellis":[],"dimensionAxis":["Contact.HAM_Reunion_Year__c_bucket"],"plots":["SYBUNT Constituent Count"]},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"valueType":"compactNumber","measureAxis1":{"sqrtScale":true,"showTitle":false,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"theme":"wave","step":"lens_1","compactDecimalDigits":-1,"dimensionAxis":{"showTitle":false,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}}}