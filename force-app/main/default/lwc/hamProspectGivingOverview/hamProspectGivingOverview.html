<template>
    <div class="backgroundWhite">
        <lightning-accordion allow-multiple-sections-open="true" active-section-name={activeGivingSectionBio} onsectiontoggle={handleGivingSectionToggle}>
            <lightning-accordion-section name="Giving Summary" label="Giving Summary">
                <template if:true={loading}>
                    <lightning-spinner
                        alternative-text="Loading..."
                        size="medium"
                        variant="brand">
                    </lightning-spinner>
                </template>
                <template lwc:if={contactDetails}>
                     <div class="slds-grid slds-wrap slds-gutters slds-p-around_small">
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2"></div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2 slds-text-align_right">
                            <lightning-button label="Share Feedback" onclick={navigateToHelp}></lightning-button>
                        </div>
                    </div>
                    <!-- Badges -->
                    <div class="slds-grid slds-wrap slds-align_absolute-center slds-m-bottom_small">
                        <template if:true={contactDetails.HAM_1812__c}>
                            <div class="slds-p-around_x-small slds-text-align_center">
                                <img src={badgeFor1812} alt="1812" title="1812"  class="icon-image-small" />
                               
                            </div>
                        </template>
                        <template if:true={contactDetails.HAM_Founders_Circle__c}>
                            <div class="slds-p-around_x-small slds-text-align_center">
                                <img src={badgeFC} alt="Founder's Circle" title="Founder's Circle" class="icon-image-small" />
                                
                            </div>
                        </template>
                        <template if:true={contactDetails.HAM_Couper_Guild__c}>
                            <div class="slds-p-around_x-small slds-text-align_center">
                                <img src={badgeCG} alt="Couper Guild" title="Couper Guild"  class="icon-image-small" />
                               
                            </div>
                        </template>
                        <template if:true={contactDetails.HAM_Chapel_Bell__c}>
                            <div class="slds-p-around_x-small slds-text-align_center">
                                <img src={badgeCB} alt="Chapel Bell" title="Chapel Bell"  class="icon-image-small" />
                                
                            </div>
                        </template>
                        <template if:true={contactDetails.HAM_Ten_to_Fifth__c}>
                            <div class="slds-p-around_x-small slds-text-align_center">
                               <img src={badgeFor10to5} alt="Annual fund donors $100k+" title="Annual fund donors $100k+"  class="icon-image-small" />
                               
                            </div>
                        </template>
                        <template if:true={contactDetails.HAM_JBA__c}>
                            <div class="slds-p-around_x-small slds-text-align_center">
                               <img src={badgeForJBA} alt="JBA" title="JBA"  class="icon-image-small" />
                               
                            </div>
                        </template>
                        <!-- Add other badges similarly... -->
                    </div>
                   
                    <!-- Giving Stats -->
                    <div class="slds-grid slds-wrap slds-gutters slds-p-around_small">
                       
                        <!-- #Yrs of Giving -->
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                            <div class="label"># Yrs of Giving (Consecutive)</div>
                            <lightning-formatted-number value={contactDetails.HAM_Consecutive_Years_of_Giving__c} minimum-fraction-digits="0"></lightning-formatted-number>
                            <div class="label slds-m-top_x-small"># Yrs of Giving (Fiscal)</div>
                            <lightning-formatted-number value={contactDetails.HAM_Total_Years_of_Giving__c} minimum-fraction-digits="0"></lightning-formatted-number>
                        </div>

                        <!-- Lifetime Giving -->
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                            <div class="label">Lifetime Committed without BQI</div>
                            <lightning-formatted-number value={contactDetails.HAM_Lifetime_Committed__c} minimum-fraction-digits="2" format-style="currency" currency-code="USD"></lightning-formatted-number>
                            <div class="label slds-m-top_x-small">Lifetime Paid</div>
                            <lightning-formatted-number value={contactDetails.HAM_Lifetime_Paid__c} minimum-fraction-digits="2" format-style="currency" currency-code="USD"></lightning-formatted-number>
                        </div>

                        <!-- Hamilton Fund -->
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                            <div class="label">Current FY Hamilton Committed</div>
                            <lightning-formatted-number value={contactDetails.HAM_Current_Yr_Hamilton_Fund_Fundraising__c} minimum-fraction-digits="2" format-style="currency" currency-code="USD"></lightning-formatted-number>
                            <div class="label slds-m-top_x-small">Current FY Hamilton Paid</div>
                            <lightning-formatted-number value={contactDetails.HAM_Current_Year_Hamilton_Fund_Collected__c} minimum-fraction-digits="2" format-style="currency" currency-code="USD"></lightning-formatted-number>
                        </div>

                         <!-- Hamilton BQI -->
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                            <div class="label">Lifetime Committed w/BQI</div>
                            <lightning-formatted-number value={contactDetails.HAM_Lifetime_Committed_w_BQI__c} minimum-fraction-digits="2" format-style="currency" currency-code="USD"></lightning-formatted-number>
                            <div class="label slds-m-top_x-small">Lifetime Bequest Intention</div>
                            <lightning-formatted-number value={contactDetails.HAM_Lifetime_Bequest_Intention__c} minimum-fraction-digits="2" format-style="currency" currency-code="USD"></lightning-formatted-number>
                        </div>
                    </div>

                    <!-- Largest Gift/Pledge -->
                    <div class="slds-grid slds-wrap slds-gutters slds-p-around_small">
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                            <div class="slds-text-title_caps slds-text-color_brand slds-m-bottom_x-small slds-p-top_small">Largest Gift</div>
                            <div class="label">Amount</div>
                            <lightning-formatted-number value={contactDetails.HAM_Largest_gift_Amount__c} minimum-fraction-digits="2" format-style="currency" currency-code="USD"></lightning-formatted-number>
                            <div class="label slds-m-top_x-small">Date</div>
                            <lightning-formatted-date-time value={contactDetails.HAM_Largest_gift_Date__c} time-zone="UTC"></lightning-formatted-date-time>
                            <div class="label slds-m-top_x-small">Purpose</div>
                            <lightning-formatted-text value={contactDetails.HAM_Largest_gift_purpose__c}></lightning-formatted-text>
                        </div>

                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                            <div class="slds-text-title_caps slds-text-color_brand slds-m-bottom_x-small slds-p-top_small">Largest Pledge</div>
                            <div class="label">Amount</div>
                            <lightning-formatted-number value={contactDetails.HAM_Largest_Pledge_Amount__c} minimum-fraction-digits="2" format-style="currency" currency-code="USD"></lightning-formatted-number>
                            <div class="label slds-m-top_x-small">Date</div>
                            <lightning-formatted-date-time value={contactDetails.HAM_Largest_Pledge_Date__c} time-zone="UTC"></lightning-formatted-date-time>
                            <div class="label slds-m-top_x-small">Purpose</div>
                            <lightning-formatted-text value={contactDetails.HAM_Largest_Pledge_Purpose__c}></lightning-formatted-text>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                            <div class="slds-text-title_caps slds-text-color_brand slds-m-bottom_x-small slds-p-top_small">Largest AF Gift</div>
                            <div class="label">Amount</div>
                            <lightning-formatted-number value={contactDetails.HAM_Largest_AF_gift_Amount__c} minimum-fraction-digits="2" format-style="currency" currency-code="USD"></lightning-formatted-number>
                            <div class="label slds-m-top_x-small">Date</div>
                            <lightning-formatted-date-time value={contactDetails.HAM_Largest_AF_gift_Date__c} time-zone="UTC"></lightning-formatted-date-time>
                            <div class="label slds-m-top_x-small">Purpose</div>
                            <lightning-formatted-text value={contactDetails.HAM_Largest_AF_gift_Purpose__c}></lightning-formatted-text>
                        </div>

                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                            <div class="slds-text-title_caps slds-text-color_brand slds-m-bottom_x-small slds-p-top_small">Largest AF Pledge</div>
                            <div class="label">Amount</div>
                            <lightning-formatted-number value={contactDetails.HAM_Largest_AF_Pledge_Amount__c} minimum-fraction-digits="2" format-style="currency" currency-code="USD"></lightning-formatted-number>
                            <div class="label slds-m-top_x-small">Date</div>
                            <lightning-formatted-date-time value={contactDetails.HAM_Largest_AF_Pledge_Date__c} time-zone="UTC"></lightning-formatted-date-time>
                            <div class="label slds-m-top_x-small">Purpose</div>
                            <lightning-formatted-text value={contactDetails.HAM_Largest_AF_Pledge_Purpose__c}></lightning-formatted-text>
                        </div>
                    </div>


                    <!-- Named Funds Table & Latest Gift -->
                     <div class="slds-grid slds-wrap slds-gutters slds-p-around_small">
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-3">
                            <div class="label slds-text-title_caps slds-text-color_brand">Named Funds</div>
                            <lightning-datatable key-field="id" data={designationDetails} columns={designationColumns} hide-checkbox-column></lightning-datatable>
                        </div>
                         <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-3">
                            <div class="slds-text-title_caps slds-text-color_brand slds-m-bottom_x-small slds-p-top_small">Latest Gift</div>
                            <div class="label">Amount</div>
                            <lightning-formatted-number value={contactDetails.HAM_Last_Gift_Amount__c} minimum-fraction-digits="2" format-style="currency" currency-code="USD"></lightning-formatted-number>
                            <div class="label slds-m-top_x-small">Date</div>
                            <lightning-formatted-date-time value={contactDetails.HAM_Last_Gift_Date__c} time-zone="UTC"></lightning-formatted-date-time>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-3">
                            <div class="slds-text-title_caps slds-text-color_brand slds-m-bottom_x-small slds-p-top_small">Current FY</div>
                            <div class="label">Paid</div>
                            <lightning-formatted-number value={contactDetails.HAM_Current_FY_Paid__c} minimum-fraction-digits="2" format-style="currency" currency-code="USD"></lightning-formatted-number>
                        </div>
                    </div>

                    <!-- Designation and Campaign Tables -->
                    <div class="slds-p-around_small">
                        <div class="label slds-text-title_caps slds-text-color_brand">Giving by Designation</div>
                        <lightning-datatable key-field="id" data={givingDetails} columns={givingDesignationColumns} hide-checkbox-column></lightning-datatable>
                    </div>
                   

                    <div class="slds-p-around_small">
                        <div class="label slds-text-title_caps slds-text-color_brand">Giving by Campaign</div>
                        <lightning-datatable key-field="id" data={campaignDetails} columns={campaignColumns} hide-checkbox-column></lightning-datatable>
                    </div>
                </template>
            </lightning-accordion-section>
        </lightning-accordion>
    </div>
</template>