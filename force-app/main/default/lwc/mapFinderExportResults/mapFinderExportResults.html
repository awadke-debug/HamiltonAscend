<template>
    <div class="slds-modal slds-fade-in-open slds-backdrop slds-modal_small">
        <div class="slds-modal__container">
          <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-border-filled" onclick={handleClose}>
              <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">
                  <use xlink:href="/_slds/icons/utility-sprite/svg/symbols.svg#close"></use>
              </svg>
              <span class="slds-assistive-text">Cancel and close</span>
          </button>
          <header class="slds-modal__header slds-text-heading_medium">
            Export selected constituents
          </header>
          <div class="slds-modal__content slds-p-around_medium slds-is-relative">
            <template if:true={displaySpinner}>
                <lightning-spinner alternative-text="Loading" variant="brand"></lightning-spinner>
            </template>
            <div class="slds-text-color_weak slds-var-p-vertical_large">
              {constituentSelected}
            </div>
            <lightning-dual-listbox name="columns"
                label="Select Columns"
                source-label="Available"
                selected-label="Selected"
                field-level-help="Select columns to include in the export"
                options={options}
                value={selectedCols}
                onchange={handleChange}
                required
                ></lightning-dual-listbox>

            <lightning-radio-group 
              name="exportType"
              label="File Format"
              options={fileFormatOptions}
              type="button"
              value={format}
              onchange={handleFormatChange}
              class="slds-var-p-top_medium"
            ></lightning-radio-group>
          </div>
          <footer class="slds-modal__footer">
              <lightning-button variant="brand" label="Export" title="Export" onclick={handleExport}></lightning-button>
          </footer>
        </div>
    </div>
</template>