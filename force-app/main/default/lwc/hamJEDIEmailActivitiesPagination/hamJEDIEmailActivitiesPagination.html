<template>
    <div class="backgroundWhite">
       <lightning-accordion allow-multiple-sections-open="true" active-section-name={activeEmailSection} onsectiontoggle={handleEmailSectionToggle}>
            <lightning-accordion-section name="Email Marketing campaigns" label="Emails">
                <template if:true={loading}>
                    <lightning-spinner
                        alternative-text="Loading..."
                        size="medium"
                        variant="brand">
                    </lightning-spinner>
                </template>
                <template lwc:if={emailDetails}>
                    <!-- Antendee Record Table -->
                    <div class="slds-p-around_small" style="width: 100%;">
                        <div class="label slds-text-title_caps slds-text-color_brand">Email Marketing campaigns</div>
                        <div style="overflow-x: auto;">
                            <lightning-datatable
                                key-field="id" 
                                data={emailDetails} 
                                columns={emailColumns} 
                                hide-checkbox-column 
                                sorted-by={sortedBy}
                                sorted-direction={sortedDirection}
                                onsort={handlEmailSort}>
                            </lightning-datatable>

                            <div class="slds-m-top_small slds-grid slds-grid_align-spread slds-align_absolute-center">
                                <lightning-button label="Prev" onclick={prevPage} disabled={isFirstPage}></lightning-button>
                                    <div class="slds-m-horizontal_small">
                                        Page {pageNumber} of {totalPages} Â· {totalRecords} total
                                    </div>
                                <lightning-button label="Next" onclick={nextPage} disabled={isLastPage}></lightning-button>
                            </div>

                        </div>
                    </div>
                    

                </template>
                <template lwc:else> No Emails Sent to the Constitiuent </template>
            </lightning-accordion-section>
        </lightning-accordion>
    </div>
</template>